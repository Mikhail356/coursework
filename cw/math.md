# Математическая модель децентрализованной системы
___
Там нужно описать то, что вы реализовали, в отрыве от конкретных технологий, например, для затравки, в терминах множества «узлов», на которых расположены «документы», идентифицируемые «путями». «Документы» имеют древовидную структуру со ссылками из некоторых листьев на другие документы. Документы могут «обмениваться уведомлениями» — парами (путь-источник, путь-приёмник) Это всё нужно расписать чуть подробнее и переложить алгоритмы из README в эту постановку. Чем более строгое тут описание с математической точки зрения, тем лучше.
___
Построить строгую математическую модель децентрализованной системы, можно при помощи языка теории графов.
## Определения
1. Лес - децентрализованная наукометрическая система.
1. Связный неориентированный граф - научное учреждение.
1. Корневая вершина связного неориентированного графа - главный сервер (уникален для каждого науного учреждения).
1. Вершины инцидентные путю корневой вершины - побочные сервера зависимые от главного (например WebMention сервер, работающий с базой данных).
1. Лист - страница публикации (или страница ученого без публикаций), идентифицируемая путем от корневой вершины.
1. Узел - вершина, которая объединяет несколько листьев (возможно 0).

## Ограничения
1. Дерево содержит минимум 2 вершины (нужен главный сервер, обрабатывающий сигналы, и WebMention сервер их принимающий и записывающий).
1. Внутри дерева сигналы передаются по обычным путям, назовем их \alfa.
1. От одного дерева к другому (по другому виду путей \beta ) можно передать сигнал (GET).
1. Путь \beta может иметь только одну инцидентную вершину.
1. Пути \alfa дублируются путями \beta

То есть мы имеем большой граф из путей \beta, в которром есть связные подграфы (с количеством вершин >= 2) с путями \alfa (некоторые из которых совпадают с путями \beta ). 

## Изменение исходной математической модели
Изменять уже существующую модель можно при помощи следующих команд.
### Обновление
__Алгоритм работы:__
1. Отправить GET запрос на указанный URL адрес
2. Если ответ пришел без ошибок (с кодом 200), то перейти к следующему шагу. Иначе прекратить работу и вывести сообщение об ошибке.
3. Разобрать html код страницы, полученный на прошлом шаге.
4. Найти все ссылки на другие страницы и URL адрес WebMention сервера.
5. Отправить на URL адрес WebMention сервера POST запросы, содержащие:
    1. URL Адрес текущей страницы.
    2. URL Адрес целевой страницы.
    4. URL Адрес личного  WebMention сервера для сервера, содержащего текущую страницу.
6. Вывод URL адресов обновленных страниц на экран.

## Проверка
__Кратко__. На вход подается физический адрес .html файла страницы и ее URL адрес. Команда скачивает из _БД_ свои запросы, появившиеся после последней проверки, и редактирует существующую страницу в соответствии с ними. Редактирование происходит путем добавления и удаления новых ученых, публикаций, ссылок.
__Алгоритм работы:__
1. Считать из отдельного файла (назовем его _time_) время последнего обновления страницы.
2. Разобрать .html страницу на теги. 
3. Найти в разборе URL адрес _WebMention сервера_.
4. Считать из _БД_ все записи, посланные на данный _WebMention сервер_, имеющие целью текущую страницу, и появившиеся после даты последней проверки.
5. Отправить GET запросы на все страницы, запросы которых содержали целью текущую страницу.
6. Если результат запроса оказался удовлетворительным (вернулся с кодом 200) перейти к следующему пункту, иначе поместить данную страницу в список адресов страниц на удаление (с именем _remove_).
7. Провести проверку страницы на подлинность, в случае успеха перейти к следующему шагу, иначе поместить данную страницу в список адресов страниц на удаление (с именем _remove_).
8. URL адрес страницы поместить в массив адресов страниц для добавления (с именем _add_).
9. Найти в разборе текущей страницы все ссылки на другие страницы и поместить в массив _current_.
10. Если среди последних есть адреса страниц подлежащих удалению (находятся в _remove_), то сделать соответствующие виртуальные изменения в коде страницы.
11. Если в _current_ нет каких-то URL адресов из массива _add_, то сделать соответствующие виртуальные изменения в коде страницы.
12. Вывести на экран список изменений страницы и запросить пользователя разрешение на их внесение в физический код страницы.
13. В случае отказа завершить работу команды. Иначе провести изменения кода страницы.
14. Записать в файл _time_ время последнего обновления данной страницы.
15. Вызвать команду __Update__ __Обновления__, описанную выше.